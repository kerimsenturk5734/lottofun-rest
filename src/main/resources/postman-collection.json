{"openapi":"3.1.0","info":{"title":"LottoFun","description":"LottFun Rest Docs","version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"paths":{"/api/v1/me/tickets/buy":{"post":{"tags":["me-controller"],"operationId":"buyTicket","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BuyTicketRequest"}}},"required":true},"responses":{"402":{"description":"Insufficient balance","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResult"},"example":"    {\n      \"status\": 402\n      \"success\": false,\n      \"message\": \"Insufficient balance\",\n      \"data\": null\n    }\n"}}},"404":{"description":"Draw not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResult"},"example":"    {\n      \"status\": 404\n      \"success\": false,\n      \"message\": \"Draw not found with id: 1\",\n      \"data\": null\n    }\n"}}},"409":{"description":"Draw not available for purchasing","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResult"},"example":"    {\n      \"status\": 409\n      \"success\": false,\n      \"message\": \"Draw: 1 not available for purchasing\",\n      \"data\": null\n    }\n"}}}}}},"/api/v1/auth/register":{"post":{"tags":["auth-controller"],"operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"User registered successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResult"},"example":"    {\n      \"status\": 201\n      \"success\": true,\n      \"message\": \"Insufficient balance\",\n      \"data\": {\n           \"id\": 1,\n           \"name\": \"john\",\n           \"surname\": \"doe\",\n           \"username\": \"johndoe\",\n           \"balance\": 100\n         }\n    }\n"}}}}}},"/api/v1/auth/login":{"post":{"tags":["auth-controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"201":{"description":"User login successful","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResult"},"example":"    {\n      \"status\": 201\n      \"success\": success,\n      \"message\": \"Insufficient balance\",\n      \"data\": {\n            \"token\": \"eyJhbGciOiJIUzI1NiI...\",\n            \"expireAt\": \"2021-12-31T23:59:59.999Z\",\n      }\n    }\n"}}}}}},"/api/v1/me/tickets":{"get":{"tags":["me-controller"],"operationId":"getMyTickets","parameters":[{"name":"pageableRequest","in":"query","required":true,"schema":{"$ref":"#/components/schemas/PageableRequest"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PagedApiResultTicketDto"}}}}}}},"/api/v1/me/":{"get":{"tags":["me-controller"],"operationId":"getMe","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResultUserDto"}}}}}}},"/api/v1/draws/history":{"get":{"tags":["draw-controller"],"operationId":"history","parameters":[{"name":"pageableRequest","in":"query","required":true,"schema":{"$ref":"#/components/schemas/PageableRequest"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PagedApiResultDraw"}}}}}}},"/api/v1/draws/active":{"get":{"tags":["draw-controller"],"operationId":"active","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResultListDraw"}}}}}}}},"components":{"schemas":{"BuyTicketRequest":{"type":"object","properties":{"drawId":{"type":"integer","format":"int64"},"numbers":{"type":"array","items":{"type":"integer","format":"int32"},"maxItems":5,"minItems":5,"uniqueItems":true}}},"ApiResult":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"status":{"type":"integer","format":"int32"},"data":{"type":"object"}}},"RegisterRequest":{"type":"object","properties":{"name":{"type":"string","maxLength":50,"minLength":2},"surname":{"type":"string","maxLength":50,"minLength":2},"username":{"type":"string","maxLength":30,"minLength":4,"pattern":"^[a-zA-Z0-9_]+$"},"password":{"type":"string","maxLength":64,"minLength":8}}},"LoginRequest":{"type":"object","properties":{"username":{"type":"string","minLength":1},"password":{"type":"string","minLength":1}}},"PageableRequest":{"type":"object","properties":{"page":{"type":"integer","format":"int32","maximum":2147483647,"minimum":0},"size":{"type":"integer","format":"int32","maximum":100,"minimum":1}}},"PagedApiResultTicketDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"status":{"type":"integer","format":"int32"},"data":{"type":"array","items":{"$ref":"#/components/schemas/TicketDto"}},"page":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"}}},"TicketDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"drawId":{"type":"integer","format":"int64"},"numbers":{"type":"array","items":{"type":"integer","format":"int32"},"uniqueItems":true},"purchaseTime":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["WAITING","WON","LOST"]},"matchedCount":{"type":"integer","format":"int32"},"prize":{"type":"number","format":"double"}}},"ApiResultUserDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"status":{"type":"integer","format":"int32"},"data":{"$ref":"#/components/schemas/UserDto"}}},"UserDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"surname":{"type":"string"},"username":{"type":"string"},"balance":{"type":"number","format":"double"}}},"Draw":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"drawDate":{"type":"string","format":"date-time"},"statusUpdatedAt":{"type":"string","format":"date-time"},"winningNumbers":{"type":"array","items":{"type":"integer","format":"int32"},"uniqueItems":true},"status":{"type":"string","enum":["OPEN","CLOSED","EXTRACTED","PAYMENTS_PROCESSING","PAYMENT_DONE","FINALIZED"]}}},"PagedApiResultDraw":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"status":{"type":"integer","format":"int32"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Draw"}},"page":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"}}},"ApiResultListDraw":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"status":{"type":"integer","format":"int32"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Draw"}}}}},"securitySchemes":{"bearerAuth":{"type":"http","name":"bearerAuth","scheme":"bearer","bearerFormat":"JWT"}}}}